|这个作业属于哪个课程|https://edu.cnblogs.com/campus/fzu/2022OOP|
|-- |-- |
|这个作业要求在哪里|https://edu.cnblogs.com/campus/fzu/2022OOP/homework/12432|
|这个作业的目标|学习安装并配置一台~~Ubuntu虚拟机~~Manjaro及Arch物理机并学习shell基本命令|
|作业正文|在万能好基友的指引下先从Manjaro入手，考虑到图形化安装界面相对友好，以及Arch系有aur包的方便。难点在于网卡驱动。网卡是瑞昱的RTL8852AE，刷机时并不在官方包内，似乎现在有了。由于已经过去了一段时间，导致也不太记得当时安装的的细节，故以下细说Arch安装。<br><br>Arch安装的难度在于完全没有图形化界面，而且包括Linux内核这种底层软件都需要手动安装，但是谢天谢地我有万能的好基友。<br><br>特殊情况：由于此次尝试安装Arch的电脑太旧，仅有DDR3L 1GB内存，所以分了4G swap分区作虚拟内存<br><br>正片开始：<br>`cfdisk /dev/sda` 进入磁盘分区。此处`DELETE`了全盘，分4G为sda2分区，`TYPE`改为`swap`。sda1分区开`BOOTABLE`<br>选中`WRITE`，输入`yes`<br>`mkfs.ext4 /dev/sda1` 将sda1分区格式化为ext4<br>`mkswap /dev/sda2` 将sda2分区格式化为swap<br>`mount /dev/sda1 /mnt` 把sda1挂载到/mnt下<br>`swapon /dev/sda2` 开启sda2的swap<br>`nano /etc/pacman.d/mirrorlist` 打开镜像源列表并在最上方插入`Server = https://opentuna.cn/archlinux/$repo/os/$arch`,ctrl+o ctrl+x保存退出<br><br>以下为装系统环节，因使用Manjaro时用的kde桌面，故此处仍安装kde：<br>`pacstrap -i /mnt linux base base-devel xf86-video-intel grub plasma kde-system kde-utilities noto-fonts noto-fonts-cjk noto-fonts-extra noto-fonts-emoji nano git linux-firmware` （是的，这是一整行命令）安装linux内核、基本程序、驱动、字体、引导、kde<br>`genfstab /mnt >> /mnt/etc/fstab` 把当前分区信息写到新系统<br>`arch-chroot /mnt` 切换到新系统<br>`nano /etc/locale.gen`<br>`找到zh_CN.UTF-8和en_US.UTF-8删去“#”保存退出`<br>`locale-gen`<br>`nano /etc/locale.conf`<br>`输入LANG=zh_CN.UTF-8保存退出`<br>以上5行配置语言<br>`ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime` 配置地区<br>`nano /etc/hostname` 输入主机名（即希望这台电脑叫什么）后保存退出，不输入则主机名为archlinux<br>`useradd -m -g wheel 用户名 -c "注释"` 创建新用户<br>`nano /etc/sudoers`<br>`找到%wheel ALL=(ALL) ALL 把#删掉 保存退出` 把处于wheel用户组的所有用户授予sudo权限<br>`passwd` 设置root密码<br>`passwd 用户名` 设置新用户密码<br>`grub-install /dev/sda` 装引导<br>`grub-mkconfig -o /boot/grub/grub.cfg` 生成引导目录<br>`systemctl enable sddm NetworkManager` 启用登录窗口和网络服务<br>`exit` 退出chroot环境<br>`umount /dev/sda1` 取消挂载sda1<br>`reboot` 重启（记得拔U盘，除非你不是靠更改启动顺序启动的U盘）<br><br>装系统环节到此告一段落，已经可以进入桌面环境了，但因网卡相对特殊，以下为装网卡驱动环节：<br>`git clone https://aur.archlinux.org/yay-bin`<br>`cd yay-bin`<br>`makepkg -si`<br>`yay -S b43-firmware`<br>`n`<br>之后一路回车，`reboot`重启，网卡驱动安装完毕。<br><br>至此，一台算是功能完备的Arch电脑安装完成（大概），可以通过强大的aur包安装fcitx输入法、firefox浏览器等|
|其他参考文献|https://archlinux.org/<br>万能基友的强大大脑|